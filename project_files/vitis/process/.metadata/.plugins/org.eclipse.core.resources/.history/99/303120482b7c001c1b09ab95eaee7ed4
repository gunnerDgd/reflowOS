#include <xparameters.h>
#include <xil_printf.h>

extern "C"
{
	#include "test.S"
}


int main_stk = 0, test_stk = XPAR_MIG_7SERIES_0_BASEADDR;

void test(void* unused)
{
	xil_printf("Hello Test #0\r\n");
	store_and_switch(test_stk, main_stk);
	xil_printf("Hello Test #1\r\n");
}

int main()
{
	xil_printf("Hello Main #0\r\n");
	store_and_execute(main_stk, test_stk, test, NULL);
	xil_printf("Hello Main #1\r\n");
}
