#include <reflowOS/base/process/asm/microblaze/context.hpp>

#include <tuple>
#include <utility>
#include <type_traits>

namespace reflowOS::hardware_specific::microblaze {

	template <typename ExecType, typename... ExecArgs>
	struct __execute_pack
	{
		typedef std::decay_t<ExecType>    exec_type;
		typedef std::tuple  <ExecArgs...> args_type;

		exec_type __exec;
		args_type __args;
	};

	template <typename PackType>
	void   __execute_to(void*);

	template <typename ExecType, typename... ExecArgs>
	void execute_to  (context&, context&, ExecType&&, ExecArgs&&...);
	void switch_to   (context&, context&);
}

template <typename PackType>
void   reflowOS::hardware_specific::microblaze::__execute_to(void* pack_void)
{
	PackType* pack_ptr = reinterpret_cast<PackType*>(pack_void);
	std::apply();
}

template <typename ExecType, typename... ExecArgs>
void reflowOS::hardware_specific::microblaze::execute_to(context& prev, context& curr, ExecType&& exec, ExecArgs&&...)
{

}

void reflowOS::hardware_specific::microblaze::switch_to (context&, context&)
{

}
