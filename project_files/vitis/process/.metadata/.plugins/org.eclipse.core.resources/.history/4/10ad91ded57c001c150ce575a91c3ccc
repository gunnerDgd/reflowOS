#define CONTEXT_STD(type) constexpr static type

namespace reflowOS {
	template <typename ContextTraits>
	class basic_context
	{
	public:
		typedef 		 ContextTraits 				   traits_type;
		typedef typename ContextTraits::context_type   context_type;

		typedef typename ContextTraits::execute_type   execute_type;
		typedef typename ContextTraits::parameter_type parameter_type;

	public:
		template <typename NextContext>
		void switch_to(NextContext&& next) { traits_type::switch_to(__M_context_pcb, next); }

	private:
		context_type __M_context_pcb;
	};

	template <typename AnyContext>
	struct is_context 							  { CONTEXT_STD(bool) value = false; };

	template <typename AnyContext>
	struct is_context<basic_context<ContextType>> { CONTEXT_STD(bool) value = false; };
}
