#include <reflowOS/boot/boot_memory.hpp>

#define MODULE_STATIC(type) constexpr static type

namespace reflowOS {
namespace boot 	   {

	struct module_entry
	{
		typedef char  	    name_type[255];
		typedef void* 	    pointer_type;
		typedef std::size_t size_type;

		MODULE_STATIC(pointer_type) base_pointer  = XPAR_MIG_7SERIES_0_BASEADDR;
		MODULE_STATIC(pointer_type) table_size    = 4096;
		MODULE_STATIC(pointer_type) module_size   = 4096 * 2;

		name_type    module_name;
		pointer_type module_pointer;
		size_type    module_size;

	};

	module* module_initialize();
	void	module_shutdown  ();

	class module_manager
	{
	public:
		typedef reflowOS::boot::module_entry module_type;

	public:
		template <typename ModuleType>
		ModuleType*
	};

}
}

template <typename ModuleType>
ModuleType* reflowOS::boot::load_module  (const char*, ModuleType&& module)
{
}

template <typename ModuleType>
ModuleType* reflowOS::boot::unload_module(const char* module_name)
{
}
